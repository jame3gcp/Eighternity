# 사주 계산 정확도 개선 가이드

## 🔍 발견된 문제

1984년 11월 16일 1시 남자 기준으로 테스트한 결과:

### 현재 계산 결과
- 연주: 甲子 ✅
- 월주: 甲子 ❌ (문제)
- 일주: 己卯 ✅
- 시주: 乙丑 ✅

### 예상 정확한 결과
- 연주: 甲子 ✅
- 월주: 乙亥 ✅ (입동 이후이므로 亥월)
- 일주: 己卯 ✅
- 시주: 乙丑 ✅

## 📊 문제 분석

### 월주 계산 문제

**1984년 11월 16일의 절기:**
- 입동(立冬): 1984년 11월 7일
- 대설(大雪): 1984년 12월 7일

**11월 16일은:**
- 입동(11/7) 이후
- 대설(12/7) 이전
- 따라서 **亥월(10월)**이 맞습니다.

**현재 코드의 문제:**
- `getMonthDizhiBySolarTerm` 함수가 11월 16일을 子월로 계산하고 있음
- 절기 기준 로직이 정확하지 않음

## 🔧 수정 방안

### 1. 절기 기준 월 계산 개선

절기 기준:
- 입춘(2/4) ~ 경칩(3/6) 전 = 寅월
- 경칩(3/6) ~ 청명(4/5) 전 = 卯월
- ...
- 입동(11/7) ~ 대설(12/7) 전 = **亥월** ← 여기가 문제
- 대설(12/7) ~ 소한(1/6) 전 = 子월

### 2. 시주 계산 검증

1시는:
- 23-1시 = 子시
- 1-3시 = **丑시** ← 현재 코드는 이렇게 계산하고 있음

## ✅ 검증 방법

다른 사주 시스템과 비교:
1. 온라인 사주 사이트에서 동일한 정보 입력
2. 결과 비교:
   - 연주, 월주, 일주, 시주
   - 오행 분포
   - 십성 분포

## 📝 참고

사주 계산이 다른 시스템과 다를 수 있는 이유:
1. **절기 계산 방식**: 절기 날짜가 연도별로 약간 다를 수 있음
2. **시간대**: UTC vs 현지 시간
3. **기준 연도**: 1900년 기준 vs 다른 기준
4. **시각 정의**: 자시(子時)의 시작 시간 정의

## 🎯 다음 단계

1. 절기 계산 로직 정확도 향상
2. 실제 절기 날짜 데이터 사용 (연도별 정확한 절기 시간)
3. 다양한 날짜로 테스트 및 검증
